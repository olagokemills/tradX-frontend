<form [formGroup]="findingForm" (ngSubmit)="onSubmit()" class="add-finding-form">
  <!-- Loading indicator -->
  <div *ngIf="loadingData" class="loading-overlay">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <!-- Form fields -->
  <div class="form-group">
    <label for="serialNumber">Serial Number</label>
    <input id="serialNumber" formControlName="serialNumber" placeholder="Serial Number" class="form-control" type="text" />
  </div>
  <div class="form-group">
    <label for="agreedClosureDate">Agreed Closure Date</label>
    <input id="agreedClosureDate" formControlName="agreedClosureDate" type="date" placeholder="Agreed Closure Date" class="form-control" />
  </div>
  <div class="form-group">
    <label for="priorityLevel" class="form-label mb-1">Priority Level</label>
    <select id="priorityLevel" formControlName="priorityLevel" class="form-select w-100">
      <option value="" disabled>Select Priority Level</option>
      <option *ngFor="let option of priorityOptions" [value]="option">{{ option }}</option>
    </select>
  </div>
  <div class="form-group">
    <label for="findingTitle">Finding Title</label>
    <input id="findingTitle" formControlName="findingTitle" placeholder="Finding Title" class="form-control" type="text" />
  </div>
  <div class="form-group">
    <label for="findingCategory" class="form-label mb-1">Finding Category</label>
    <select id="findingCategory" formControlName="findingCategory" class="form-select w-100">
      <option value="" disabled>Select Finding Category</option>
      <option *ngFor="let option of categoryOptions" [value]="option">{{ option }}</option>
    </select>
  </div>
  <div class="form-group">
    <label for="auditObservation">Description Of Audit Observation</label>
    <textarea id="auditObservation" class="form-control" formControlName="auditObservation" placeholder="Enter details" rows="3"></textarea>
  </div>
  <div class="form-group">
    <label for="recommendation">Recommendation</label>
    <textarea id="recommendation" class="form-control" formControlName="recommendation" placeholder="Enter details" rows="3"></textarea>
  </div>
  <div class="form-group">
    <label for="rootCause">Root Cause</label>
    <textarea id="rootCause" class="form-control" formControlName="rootCause" placeholder="Enter root cause details" rows="3"></textarea>
  </div>
  <div class="form-group">
    <label for="findingImpact">Finding Impact</label>
    <textarea id="findingImpact" class="form-control" formControlName="findingImpact" placeholder="Enter finding impact details" rows="3"></textarea>
  </div>
  <div class="form-group">
    <label for="issueOwner" class="form-label mb-1">Issue Owner</label>
    <select id="issueOwner" formControlName="issueOwner" class="form-select w-100">
      <option value="" disabled>Select Issue Owner</option>
      <option *ngFor="let option of userOptions" [value]="option.value">{{ option.label }}</option>
    </select>
  </div>
  <div class="form-group">
    <label for="managementActionPlan">Management Action Plan</label>
    <textarea id="managementActionPlan" class="form-control" formControlName="managementActionPlan" placeholder="Enter details" rows="3"></textarea>
  </div>
  <div class="form-row d-flex gap-3">
    <div class="form-group flex-fill">
      <label for="reminder" class="form-label mb-1">Reminder</label>
      <select id="reminder" formControlName="reminder" class="form-select w-100">
        <option value="" disabled>Select Reminder</option>
        <option *ngFor="let option of reminderOptions" [value]="option">{{ option }}</option>
      </select>
    </div>
    <div class="form-group flex-fill">
      <label for="reminderUser" class="form-label mb-1">Reminder User</label>
      <select id="reminderUser" formControlName="reminderUser" class="form-select w-100">
        <option value="" disabled>Select User for Reminder</option>
        <option *ngFor="let option of userOptions" [value]="option.value">{{ option.label }}</option>
      </select>
    </div>
  </div>
  <div class="form-group mt-4 d-flex gap-2">
    <app-loader-button
      type="submit"
      [loading]="loading"
      [disabled]="!findingForm.valid || loadingData"
      [text]="isEditMode ? 'Update Finding' : 'Create Finding'"
      btnClass="btn btn-primary submit-btn flex-grow-1"
      [loaderText]="isEditMode ? 'Updating...' : 'Creating...'">
    </app-loader-button>
  </div>
</form>
