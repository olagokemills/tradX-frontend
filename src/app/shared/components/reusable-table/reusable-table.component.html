<div class="table-responsive">
  <table class="table table-hover mb-0">
    <!-- headers -->
    <thead>
      <tr>
        <ng-container
          *ngTemplateOutlet="
            headers || defaultHeaderTemplate;
            context: { $implicit: tableData }
          "
        ></ng-container>
      </tr>
    </thead>
    <tbody>



      <!-- Data rows -->
      <tr *ngFor="let tableRow of tableData" [style.display]="isLoading ? 'none' : 'table-row'">
        <ng-container
          *ngTemplateOutlet="
            rows || defaultRowTemplate;
            context: { $implicit: tableRow }
          "
        >
        </ng-container>
      </tr>
    </tbody>
  </table>

        <!-- Loading State -->
  <ng-container *ngIf="isLoading">
        <div class="loading-cell">
          <div class="loading-container">
            <img
              src="https://cdn.pixabay.com/animation/2022/07/29/03/42/03-42-11-849_512.gif"
              alt="Loading..."
              class="loading-gif"
            >
            <p class="loading-text">Loading data...</p>
          </div>
        </div>
      </ng-container>
</div>

<!-- Empty State (only show when not loading and no data) -->
<div *ngIf="!isLoading && (!tableData || tableData?.length == 0)">
  <ng-container>
    <div class="empty-tables">
      <i class="bi bi-emoji-frown-fill"></i>
      <div class="py-3"><p>No Data available for now, check later</p></div>
    </div>
  </ng-container>
</div>

<!-- Pagination Section -->
<div *ngIf="shouldShowPagination()" class="d-flex justify-content-between align-items-center mt-4">
  <button
    class="btn btn-outline-secondary me-2"
    [disabled]="!hasPreviousPage"
    (click)="onPreviousPage()">
    Previous
  </button>
  <div class="pagination-info">
    <span class="text-muted">
      Page {{ currentPage }} of {{ totalPages }}
      ({{ totalCount }} total {{ totalCount === 1 ? 'record' : 'records' }})
    </span>
  </div>
  <button
    class="btn btn-outline-secondary"
    [disabled]="!hasNextPage"
    (click)="onNextPage()">
    Next
  </button>
</div>

<ng-template #defaultHeaderTemplate let-tableData>
  <th *ngFor="let header of tableData[0] | keyvalue">
    {{ header.key }}
  </th></ng-template
><ng-template #defaultRowTemplate let-tableRow>
  <td *ngFor="let row of tableRow | keyvalue">{{ row.value }}</td></ng-template
>
